<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.3.0 for Hugo" />
  

  
    <meta name="google-site-verification" content="U7jZ7b0hmEF2h3bCJtTey4gPa2RTG1IAj4UtXfCMvdU" />

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Alvaro Franco Martins" />

  
  
  
    
  
  <meta name="description" content="Play with networks that simulate real political corruption networks" />

  
  <link rel="alternate" hreflang="en-us" href="https://alvarofrancomartins.com/post/corruption-networks-model/" />

  









  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous" media="print" onload="this.media='all'">

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    

    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Roboto&display&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.0fc9565427c6d9dd10e3e90eb18c9be4.css" />

  



  

  

  




  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu2554c39cea7f7ac56f2127a9008220c1_75996_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu2554c39cea7f7ac56f2127a9008220c1_75996_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://alvarofrancomartins.com/post/corruption-networks-model/" />

  
  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@alvarofmartins" />
    <meta property="twitter:creator" content="@alvarofmartins" />
  
  <meta property="og:site_name" content="Alvaro Franco Martins" />
  <meta property="og:url" content="https://alvarofrancomartins.com/post/corruption-networks-model/" />
  <meta property="og:title" content="The computational model of political corruption networks | Alvaro Franco Martins" />
  <meta property="og:description" content="Play with networks that simulate real political corruption networks" /><meta property="og:image" content="https://alvarofrancomartins.com/post/corruption-networks-model/featured.png" />
    <meta property="twitter:image" content="https://alvarofrancomartins.com/post/corruption-networks-model/featured.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2020-12-13T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2020-12-13T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://alvarofrancomartins.com/post/corruption-networks-model/"
  },
  "headline": "The computational model of political corruption networks",
  
  "image": [
    "https://alvarofrancomartins.com/post/corruption-networks-model/featured.png"
  ],
  
  "datePublished": "2020-12-13T00:00:00Z",
  "dateModified": "2020-12-13T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Alvaro Franco Martins"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Alvaro Franco Martins",
    "logo": {
      "@type": "ImageObject",
      "url": "https://alvarofrancomartins.com/media/icon_hu2554c39cea7f7ac56f2127a9008220c1_75996_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Play with networks that simulate real political corruption networks"
}
</script>

  

  

  

  <head>
   <style>
   .article-container {
      max-width: 1250px;
   }

   #about {
      background-image: url('/media/graph-draw.png');
   }

   #container-publications {
      height:  220px !important;
   }

   .see-all {
      text-transform: none !important;
   }
   </style>

   <script src="/js/prism.js"></script>

   <link rel="stylesheet" href="/css/prism.css" type="text/css"/> 

</head>

  <title>The computational model of political corruption networks | Alvaro Franco Martins</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="7147f3c8217ff551f455891882c4d951" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.8988fb2a4bba758785868cfcb5244555.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Alvaro Franco Martins</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Alvaro Franco Martins</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/experience"><span>Experience</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/publication"><span>Publications</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>The computational model of political corruption networks</h1>

  
  <p class="page-subtitle">Play with networks that simulate real political corruption networks</p>
  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    

  <span class="author-highlighted">
      <a href="/author/alvaro-franco-martins/">Alvaro Franco Martins</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Dec 13, 2020
  </span>
  

  

  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/corruption_networks/">corruption_networks</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      
<style>
figure {
    display: flex;
    flex-flow: column;
}

figcaption {
  font-size:  15px !important; 
  font-family: "Roboto", sans-serif;
  font-weight: 500;
  margin-top: 0.5rem !important; 
  margin-bottom: 0rem !important;
  line-height: 1.25;
  color: #313131;
  text-rendering: optimizeLegibility;
  /* Ensure long words do not overflow into content. */
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
  /* Add a hyphen where the word breaks (use `&shy;` to insert a soft-hyphen in a word). */
  -webkit-hyphens: manual;
  -ms-hyphens: manual;
  hyphens: manual; 
}
</style>

<figure>
    <img src="rede.png" width="500px" height="399px" alt = 'ok'/>
    <figcaption>Figure: Visualization of a network generated using the model</figcaption>
</figure>

<p>In this post, I will briefly describe our computational model of political corruption networks. I also present an interactive version of the model and then show the code in Python. This model is extensively described and studied in our <a href="https://www.google.com" target="_blank" rel="noopener">publication</a> in Journal X. I also made a <a href="https://www.alvarofrancomartins.com/post/corruption-networks" target="_blank" rel="noopener">post</a> of our main findings on the political corruption networks of Brazil and Spain.</p>
<h1 id="the-model">The model</h1>
<p>In summary, we have proposed the model based off two of our main findings about political corruption networks.</p>
<p>The first finding is that the number of people per scandal seems to follow an exponential distribution with a characteristic number of $1/\lambda \approx 7$ people per scandal. This result was found in both Brazilian and Spanish datasets on corruption scandals.</p>
<p>The second finding is that the number of repeat offenders can be modeled by the following equation.</p>
<p>$$r(n) = \alpha n + \beta,$$</p>
<p>where $n$ is the total number of people. The parameters are</p>
<ul>
<li>$\alpha$: The recidivism rate (number of repeat offenders / total number of offenders) $\in [0, 1]$.</li>
<li>$\beta$: The regression coefficient. It controls when the repeat offenders starts to appear in the network $\in [-\infty, 0)$.</li>
</ul>
<p>The networks in our model grows by the addition of &ldquo;scandals&rdquo; or <a href="https://en.wikipedia.org/wiki/Complete_graph" target="_blank" rel="noopener">complete graphs</a>. The complete graphs (sampled by the exponential distribution with $1/\lambda$) simulate the scandals in the same way that, in a scandal, all individuals involved are connected. As the number of vertices $n$ grows, the number of repeat offender $r(n)$ also grows and they start to connect different parts of the network. Depending on the value of $\alpha$, we get different network structures. Since the model is stochastic, every new network will be different.</p>
<p>And that is basically it<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. If you want to see in detail how the model was written, skip to the <a href="#algorithm">algorithm</a>.</p>
<h1 id="play-with-the-model">Play with the model</h1>
<p>Below you can grow the networks generated by our model<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> and see how it evolves as you keep adding the scandals<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>. To play with the model, first click in <strong>Start new network</strong> and then keep clicking on <strong>Add new scandal</strong>. You will note that, in the beginning, only complete graphs are appearing. However, after a while you will see that they will start to connect different parts of the network and a structure will develop.</p>
<p>If the visualization starts to lag after a while, just click in <strong>Start new network</strong> again.</p>

<!DOCTYPE html>
<html lang="en">

  <head>
    <title>Network Corruption Model</title>

    <style>
      #mynetwork {
        display: inline-block;
        height: 620px;
        width: 100%;
        border: 1px solid #444444;
        background-color: #222222;
      }

      .input-group {
        width: 80%;
        padding:  0px;
      }

      .my_input {
        border: solid 1px #ccc;

        padding-left: 10px;

        border-radius: 5px;
        margin-bottom: 5px;
        }

      .btn-primary{
        font-size: 20px;
        margin-left: 10px;
        margin-bottom: 5px;
      }

      .btn-outline-primary{
        font-size: 20px;
        margin-left: 10px;
        margin-bottom: 5px;
      }

      .row {
        margin-left:2px;
      }
    }
    </style>

    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>

  <body>
    <div class="input-group">
      <label style="font-size:28px;padding-top:5px;">$\alpha$ &nbsp</label><input class = "my_input" type="number" name="recidivism_rate" min=0 max=1 step=0.001 value=0.142 id="recidivism_rate" oninput= "(!validity.rangeOverflow||(value=1)) && (!validity.rangeUnderflow||(value=0)) &&
(!validity.stepMismatch||(value=parseInt(this.value)));"/>

      <label style="font-size:28px;padding-top:5px;">&nbsp&nbsp $\beta$ &nbsp</label><input class = "my_input" type="number" name="beta_parameter" min=-100 max=-1 step=-1 value=-11 id="beta_parameter" oninput= "(!validity.rangeOverflow||(value=-1)) && 
(!validity.stepMismatch||(value=parseInt(this.value)));" />

      <div class="row">
        <button id="startNewNetwork" class="btn btn-primary" onclick="startNewNetwork();addCompleteGraph();enableAddGraph();">Start new network</button>
        <button id="add_new_scandal" class="btn btn-outline-primary" onclick="addCompleteGraph();" disabled>Add new scandal</button>
      </div>

    </div>

    <div id="mynetwork"></div>

    <script type="text/javascript">
      var container = document.getElementById("mynetwork");

      proba = 0.024;
      lambda = 7.33;

      const options = {
        "autoResize": true,
        "height": '100%',
        "width": '100%',
        "physics": {
          "enabled": true,
          "forceAtlas2Based": {
            "theta": 0.9,
            "gravitationalConstant": -100,
            "centralGravity": 0.01,
            "springConstant": 0.08,
            "springLength": 100,
            "damping": 0.7,
            "avoidOverlap": 0
          },
          "maxVelocity": 50,
          "minVelocity": 0.1,
          "solver": 'forceAtlas2Based',
          "stabilization": {
            "enabled": false
          },
          "timestep": 0.2,
          "adaptiveTimestep": true,
        },
        "edges": {
          "smooth": false
        },
        "nodes": {
          "shape": "dot",
          "size": 10,
        },
        "interaction": {
          "dragNodes": false,
          "dragView": true
        }
      }

      function startNewNetwork() {
        a = parseFloat(document.getElementById("recidivism_rate").value);
        b = parseFloat(document.getElementById("beta_parameter").value);

        last_agent_index = 0;
        total_repeated_agents = 0;

        repeated_agent_names = [];
        agent_names = [];

        nodes = new vis.DataSet();
        edges = new vis.DataSet();

        data = {
          nodes: nodes,
          edges: edges,
        };

        return network = new vis.Network(container, data, options);
      }

      function expoSampling(scale) {
        return Math.round(-scale * Math.log(1.0 - Math.random()));
      }

      function addCompleteGraph() {
        // calculate the size of the complete graph to enter the network
        var n_new_agents = expoSampling(lambda);

        while (n_new_agents <= 1) {
          var n_new_agents = expoSampling(lambda);
        }

        // get index from new nodes
        var new_agent_names = [];
        for (let n = last_agent_index; n < last_agent_index + n_new_agents; n++) {
          new_agent_names.push(n);
        }
        last_agent_index += n_new_agents;

        size_network = agent_names.length;

        // apply model
        var new_repeated_agents = Math.round(a * (size_network) + b - total_repeated_agents);

        if (new_repeated_agents > 0) {

          var minimo = Math.min(new_repeated_agents, new_agent_names.length);

          for (let i = 0; i < minimo; i++) {

            if ((Math.random() <= proba) && (repeated_agent_names.length > 0)) {

              id_old = repeated_agent_names[Math.floor(Math.random() * repeated_agent_names.length)];

            } else {

              let difference = agent_names.filter(x => !repeated_agent_names.includes(x));

              id_old = difference[Math.floor(Math.random() * difference.length)];

              total_repeated_agents += 1;
            }

            new_agent_names[i] = id_old;
            repeated_agent_names.push(id_old);
          }
        }

        for (let i = 0; i < new_agent_names.length; i++) {
          if (!agent_names.includes(new_agent_names[i])) {
            agent_names.push(new_agent_names[i])
          }
        }

        // add complete graph to the network
        for (let n = 0; n < new_agent_names.length; n++) {
          nodes.update({
            id: new_agent_names[n]
          })
        }

        for (let i = 0; i < new_agent_names.length; i++) {
          for (let j = i + 1; j < new_agent_names.length; j++) {
            let i_ = new_agent_names[i];
            let j_ = new_agent_names[j];

            if (i_ != j_) {
              edges.update({
                from: i_,
                to: j_
              });
            }
          }
        }
        network.fit();
      }

      // button dynamics
      const numSeconds = 1
      document.querySelector('#add_new_scandal').addEventListener('click', (e) => {
        e.target.disabled = true
        setTimeout(() => {
          e.target.disabled = false
        }, numSeconds * 500)
      })

      function enableAddGraph() {
        document.getElementById("add_new_scandal").disabled = false;
      }

    </script>

  </body>

</html>
<p>This interactive visualization was made using <a href="https://visjs.org/" target="_blank" rel="noopener">visjs</a>, a browser based visualization library.</p>
<h1 id="algorithm">The python algorithm</h1>
<p>First of all, we need the following packages.</p>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">numpy</span>          <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">graph_tool.all</span> <span class="k">as</span> <span class="nn">gt</span>

<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">combinations</span>
</code></pre></div><p>After importing these modules, we can then write the model function:</p>
<details class="spoiler "  id="spoiler-2">
  <summary>Click to view the full algorithm</summary>
  <p><div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">generate_net_links</span><span class="p">(</span><span class="n">tmax</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">lambda_</span> <span class="o">=</span> <span class="mf">7.33</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">0.09</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="mf">11.5</span><span class="p">,</span> <span class="n">proba</span> <span class="o">=</span> <span class="mf">0.024</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Generate a corruption network based on our model.
</span><span class="s2">    
</span><span class="s2">    Parameters
</span><span class="s2">    ---------
</span><span class="s2">
</span><span class="s2">    tmax : int
</span><span class="s2">           Number of iteration steps (default: 100).
</span><span class="s2">    lambda_ : float
</span><span class="s2">           Characteristic number of people per scandal (default: 7.33).
</span><span class="s2">    a, b : float
</span><span class="s2">           Parameters defining the number of repeated agents (nr) as a function
</span><span class="s2">           of total number of agents (n): nr = a*n + b (default: 0.09, -11.5).
</span><span class="s2">    proba : float
</span><span class="s2">            Probability of selecting a repeated agent that was already involved in
</span><span class="s2">            another scandal (default: 0.024091841863485983).
</span><span class="s2">
</span><span class="s2">    Returns
</span><span class="s2">    -------
</span><span class="s2">    links_list : list
</span><span class="s2">                 A list of edge lists where each element correspond to
</span><span class="s2">                 a particular iteration step.
</span><span class="s2">    &#34;&#34;&#34;</span>
    
    <span class="n">t</span>                          <span class="o">=</span> <span class="mi">0</span>
    <span class="n">links</span>                      <span class="o">=</span> <span class="p">[]</span>
    <span class="n">links_list</span>                 <span class="o">=</span> <span class="p">[]</span>
    <span class="n">agent_names</span>                <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">last_agent_index</span>           <span class="o">=</span> <span class="mi">0</span>
    <span class="n">repeated_agent_names</span>       <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">total_repeated_agents</span>      <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">tmax</span><span class="p">:</span>
        <span class="n">n_new_agents</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">exponential</span><span class="p">(</span><span class="n">lambda_</span><span class="p">)))</span>
            
        <span class="k">if</span> <span class="n">n_new_agents</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        
            <span class="n">new_agent_names</span>     <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">last_agent_index</span><span class="p">,</span> <span class="n">last_agent_index</span> <span class="o">+</span> <span class="n">n_new_agents</span><span class="p">)]</span>
            <span class="n">last_agent_index</span>   <span class="o">+=</span> <span class="n">n_new_agents</span>
            
            <span class="n">new_repeated_agents</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">agent_names</span><span class="p">))</span> <span class="o">+</span> <span class="n">b</span> <span class="o">-</span> <span class="n">total_repeated_agents</span><span class="p">)))</span>
            
            <span class="k">if</span> <span class="n">new_repeated_agents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">new_repeated_agents</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_agent_names</span><span class="p">))):</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">proba</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">repeated_agent_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="c1">#select from repeated_agent_names</span>
                        <span class="n">repeated_agent</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeated_agent_names</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#select from agent_names</span>
                        <span class="n">repeated_agent</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">repeated_agent_names</span><span class="o">^</span><span class="n">agent_names</span><span class="p">))</span>
                        <span class="n">total_repeated_agents</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="n">new_agent_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeated_agent</span>
                    <span class="n">repeated_agent_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">repeated_agent</span><span class="p">)</span>
                    
            <span class="k">for</span> <span class="n">agent_</span> <span class="ow">in</span> <span class="n">new_agent_names</span><span class="p">:</span>
                <span class="n">agent_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">agent_</span><span class="p">)</span>
            
            <span class="n">new_links</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="n">new_agent_names</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
            
            <span class="n">links_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">new_links</span><span class="p">]</span>
            <span class="n">t</span>          <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">links_list</span>
</code></pre></div></p>
</details>
<p>This function returns a list of edge lists where each element correspond to a particular iteration step.</p>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="n">edge_lists</span> <span class="o">=</span> <span class="n">generate_net_links</span><span class="p">(</span><span class="n">tmax</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">0.142</span><span class="p">)</span> <span class="c1"># e.g, [[(0, 1), (0, 3), ... (5, 6)], [(7, 8), (7, 9) ... (14, 15)], ... ]</span>
</code></pre></div><p>To create the network until step $t$ we need to concatenate these lists.</p>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="k">def</span> <span class="nf">network</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">edges_list</span><span class="p">):</span>
    <span class="n">g</span>           <span class="o">=</span> <span class="n">gt</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="n">directed</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">edge_list_t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">edges_list</span><span class="p">[:</span><span class="n">t</span><span class="p">])</span>
    
    <span class="n">g</span><span class="o">.</span><span class="n">add_edge_list</span><span class="p">(</span><span class="n">edge_list_t</span><span class="p">,</span> <span class="n">hashed</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Since we have not yet dealt with self loops and parallel edges, we will remove them. </span>
    <span class="n">gt</span><span class="o">.</span><span class="n">remove_self_loops</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    <span class="n">gt</span><span class="o">.</span><span class="n">remove_parallel_edges</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">g</span>
</code></pre></div><p>Now we can finally generate the network until $t$ steps (100 in this case).</p>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="n">final_network</span> <span class="o">=</span> <span class="n">network</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">edge_lists</span><span class="p">)</span>
<span class="n">final_network</span>
</code></pre></div><p>And then, voilà</p>
<blockquote>
<p><em>&lt;Graph object, undirected, with 767 vertices and 4805 edges, at 0x7f2789007d60&gt;</em></p>
</blockquote>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>In order to make our model more precise, we also take into account the fraction of repeat offenders that reoffend in more than two cases. Represented as $p_a$, our empirical results show that $p_a \approx 0.024$ in both Brazilian and Spanish corruption networks.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p>The default $\alpha = 0.142$ is the empirical recidivism rate found in the Brazilian corruption network. The recidivism rate found in the Spanish corruption network is $\alpha = 0.09$.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3" role="doc-endnote">
<p>Keep in mind that, depending on the value of $\alpha$, you will have to add enough complete graphs for the repeat offenders appear and start to connect to the other nodes in the network. That is, if $\alpha \to 1$ then the repeat offenders will appear quickly. On the other hand, when $\alpha \to 0$ you will need to add more complete graphs.&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/corruption-networks/">Corruption networks</a>
  
</div>













  
  
    



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://alvarofrancomartins.com"><img class="avatar mr-3 avatar-circle" src="/author/alvaro-franco-martins/avatar_hu24fc0dde7e43204c2d264da5f3800e59_73232_270x270_fill_q100_lanczos_center.jpg" alt="Alvaro Franco Martins"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://alvarofrancomartins.com">Alvaro Franco Martins</a></h5>
      <h6 class="card-subtitle">Data Scientist</h6>
      <p class="card-text">Physicist working on complex networks and data science.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:alvarought@gmail.com" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/alvarofmartins" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com.br/citations?user=yB30J2MAAAAJ" target="_blank" rel="noopener">
        <i class="fas fa-graduation-cap"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/alvarofrancomartins" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/alvarofrancomartins/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/corruption-networks/">Unveiling the hidden patterns of political corruption networks</a></li>
      
      <li><a href="/publication/brazilian-corruption-network/">The dynamical structure of political corruption networks</a></li>
      
    </ul>
  </div>
  





  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by" style="font-size:11px;">
    
    Published with
    <a href="https://wowchemy.com/" target="_blank" rel="noopener">Wowchemy</a>. 
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      

    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.ea2c153d3e439b91646a77d67da36b6a.js"></script>

    






</body>
</html>
